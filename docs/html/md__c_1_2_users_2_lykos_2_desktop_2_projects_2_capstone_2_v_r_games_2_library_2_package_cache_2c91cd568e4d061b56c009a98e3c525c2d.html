<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VRCapstoneGames: About Interaction Subsystems</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">VRCapstoneGames
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md__c_1_2_users_2_lykos_2_desktop_2_projects_2_capstone_2_v_r_games_2_library_2_package_cache_2c91cd568e4d061b56c009a98e3c525c2d.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">About Interaction Subsystems</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md2867"></a> The purpose of this <code>com.unity.xr.interactionsubsystems</code> package is to provide definitions of all subsystems that enable XR interaction functionality.</p>
<p>Presently, this package defines the following XR subsystems:</p>
<h1><a class="anchor" id="autotoc_md2868"></a>
GestureSubsystem</h1>
<p>The GestureSubsystem provides access to both platform-specific as well as common gestures through a polling mechanism. On it's own, the base XRGestureSubsystem class does not get access to gestures. It must be implemented by a platform-specific gesture subsystem that polls for gestures from a native provider each frame. These gestures are then added to specific arrays of both platform-specific and common gestures each frame.</p>
<h2><a class="anchor" id="autotoc_md2869"></a>
Common Gestures</h2>
<h3><a class="anchor" id="autotoc_md2870"></a>
Activate</h3>
<p>The activate gesture indicates that the user wants to interact with some object in the world. This can be triggered by tapping in the air, placing a finger up or tapping a touch-screen. It is up to the platform to define what source gesture should cause this (it should be the appropriate one for a given platform and consistent with how a user otherwise interacts with UI and world objects). Typically this will activate whatever object is centered in the users view.</p>
<p>See the <a href="/Runtime/GestureSubsystem/Gestures/ActivateGestureEvent.cs">ActivateGestureEvent</a> for more details.</p>
<h2><a class="anchor" id="autotoc_md2871"></a>
Example Platform Implementation</h2>
<p>The following pseudo-code is an implementation of a derived platform-specific implementation that polls a native platform (via PInvoke into DLL exported functions) for gestures. It stores and exposes the platform-specific gestures in a <code>platformGestureEvents</code> NativeArray that can be polled every frame. It also translates these gestures into the common Activate gesture (it is up to the platform on how this translation should happen, but the source gesture should map to the common gesture in a logical way).</p>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">class </span>PlatfromGestureSubsystem : XRGestureSubsystem</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> NativeArray&lt;PlatformGestureEvent&gt; platformGestureEvents { <span class="keyword">get</span> { <span class="keywordflow">return</span> m_PlatformProvider.platformGestureEvents; } }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">protected</span> <span class="keyword">override</span> Provider CreateProvider()</div>
<div class="line">    {</div>
<div class="line">        m_PlatformProvider = <span class="keyword">new</span> PlatformGestureProvider(<span class="keyword">this</span>);</div>
<div class="line">        <span class="keywordflow">return</span> m_PlatformProvider;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">class </span>PlatformGestureProvider : Provider</div>
<div class="line">    {</div>
<div class="line">        PlatformGestureSubsystem m_Subsystem;</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">public</span> PlatformGestureProvider(PlatformGestureSubsystem subsystem)</div>
<div class="line">        {</div>
<div class="line">            m_Subsystem = subsystem;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code hl_enumvalue" href="namespace_unity_engine_1_1_input_system_1_1_low_level.html#a90bda7942e6235f77d48fbc1e2a42a36aa6122a65eaa676f700ae68d393054a37">Start</a>()</div>
<div class="line">        {</div>
<div class="line">            NativeApi.UnityPlatform_GesturesStart();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> Stop()</div>
<div class="line">        {</div>
<div class="line">            NativeApi.UnityPlatform_GesturesStop();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> Update()</div>
<div class="line">        {</div>
<div class="line">            NativeApi.UnityPlatform_GesturesUpdate();</div>
<div class="line"> </div>
<div class="line">            RetrieveAllGestureEvents();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        unsafe delegate <span class="keywordtype">void</span>* GetGestureEventsPtrFunction(out <span class="keywordtype">int</span> gesturesLength, out <span class="keywordtype">int</span> elementSize);</div>
<div class="line"> </div>
<div class="line">        unsafe <span class="keywordtype">void</span> RetrieveAllGestureEvents()</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Poll native code for platform gesture events here and place into NativeArray</span></div>
<div class="line">            <span class="keywordtype">int</span> gestureEventsLength, elementSize;</div>
<div class="line">            <span class="keywordtype">void</span>* gestureEventsPtr = NativeApi.UnityPlatform_GesturesGetGestureEventsPtr(out gestureEventsLength, out elementSize);</div>
<div class="line">            <span class="keywordflow">if</span> (gestureEventsPtr == <span class="keyword">null</span>)</div>
<div class="line">                <span class="keywordflow">return</span>;</div>
<div class="line">            <span class="keywordflow">if</span> (m_PlatformGestureEvents.IsCreated)</div>
<div class="line">                m_PlatformGestureEvents.Dispose();</div>
<div class="line">            m_PlatformGestureEvents = <span class="keyword">new</span> NativeArray&lt;PlatformKeyPoseGestureEvent&gt;(gestureEventsLength, Allocator.Persistent);</div>
<div class="line">            var sizeOfPlatformKeyPoseGestureEvent = UnsafeUtility.SizeOf&lt;PlatformKeyPoseGestureEvent&gt;();</div>
<div class="line">            UnsafeUtility.MemCpy(m_PlatformGestureEvents.GetUnsafePtr(), gestureEventsPtr, elementSize * gestureEventsLength);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Translate platform gestures into common Activate gestures</span></div>
<div class="line">            <span class="keywordflow">if</span> (m_ActivateGestureEvents.IsCreated)</div>
<div class="line">                m_ActivateGestureEvents.Dispose();</div>
<div class="line">            m_ActivateGestureEvents = <span class="keyword">new</span> NativeArray&lt;ActivateGestureEvent&gt;(activateGestureEventCount, Allocator.Persistent);</div>
<div class="line">            <span class="keywordflow">for</span> (var i = 0; i &lt; m_PlatformGestureEvents.Length, ++i)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Translate every gesture here but we typically want to filter on specific gestures</span></div>
<div class="line">                m_ActivateGestureEvents[i] = <span class="keyword">new</span> ActivateGestureEvent(GetNextGUID(), gestureEvent.state);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> Destroy()</div>
<div class="line">        {</div>
<div class="line">            NativeApi.UnityPlatform_GesturesDestroy();</div>
<div class="line"> </div>
<div class="line">            m_PlatformGestureEvents.Dispose();</div>
<div class="line"> </div>
<div class="line">            base.Destroy();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">public</span> NativeArray&lt;PlatformGestureEvent&gt; platformGestureEvents { <span class="keyword">get</span> { <span class="keywordflow">return</span> m_PlatformGestureEvents; } }</div>
<div class="line">        NativeArray&lt;PlatformGestureEvent&gt; m_PlatformGestureEvents = <span class="keyword">new</span> NativeArray&lt;PlatformGestureEvent&gt;(0, Allocator.Persistent);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#if UNITY_EDITOR || PLATFORM_LUMIN</span></div>
<div class="line">    [RuntimeInitializeOnLoadMethod(RuntimeInitializeLoadType.BeforeSceneLoad)]</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">void</span> RegisterDescriptor()</div>
<div class="line">    {</div>
<div class="line">        XRGestureSubsystemDescriptor.RegisterDescriptor(</div>
<div class="line">            <span class="keyword">new</span> XRGestureSubsystemDescriptor.Cinfo</div>
<div class="line">            {</div>
<div class="line">                id = <span class="stringliteral">&quot;Platform Gesture&quot;</span>,</div>
<div class="line">                subsystemImplementationType = typeof(PlatformGestureSubsystem)</div>
<div class="line">            }</div>
<div class="line">        );</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">class </span>NativeApi</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Containes DLLImported native provider function declarations</span></div>
<div class="line">        [DllImport(<span class="stringliteral">&quot;Platform.dll&quot;</span>, CharSet=CharSet.Auto)]</div>
<div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keywordtype">void</span> UnityPlatform_GesturesUpdate();</div>
<div class="line"> </div>
<div class="line">        [DllImport(<span class="stringliteral">&quot;Platform.dll&quot;</span>, CharSet=CharSet.Auto)]</div>
<div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keywordtype">void</span> UnityPlatform_GesturesStart();</div>
<div class="line"> </div>
<div class="line">        [DllImport(<span class="stringliteral">&quot;Platform.dll&quot;</span>, CharSet=CharSet.Auto)]</div>
<div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keywordtype">void</span> UnityPlatform_GesturesDestroy();</div>
<div class="line"> </div>
<div class="line">        [DllImport(<span class="stringliteral">&quot;Platform.dll&quot;</span>, CharSet=CharSet.Auto)]</div>
<div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keywordtype">void</span> UnityPlatform_GesturesStop();</div>
<div class="line"> </div>
<div class="line">        [DllImport(<span class="stringliteral">&quot;Platform.dll&quot;</span>, CharSet=CharSet.Auto)]</div>
<div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> unsafe <span class="keywordtype">void</span>* UnityPlatform_GesturesGetPlatformGestureEventsPtr(out <span class="keywordtype">int</span> gesturesLength, out <span class="keywordtype">int</span> elementSize);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// High GUID bits saved for common (Activate) gesture for this subsystem</span></div>
<div class="line">    <span class="keyword">static</span> GestureId s_NextGUID = <span class="keyword">new</span> GestureId(1, 0);</div>
<div class="line">    <span class="keyword">static</span> GestureId GetNextGUID()</div>
<div class="line">    {</div>
<div class="line">        unchecked</div>
<div class="line">        {</div>
<div class="line">            s_NextGUID.subId1 += 1;</div>
<div class="line">            <span class="keywordflow">if</span> (s_NextGUID.subId1 != 0) <span class="keywordflow">return</span> s_NextGUID;</div>
<div class="line">            s_NextGUID.subId1 += 1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> s_NextGUID;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    PlatformGestureProvider m_PlatformProvider;</div>
<div class="line">}</div>
<div class="ttc" id="anamespace_unity_engine_1_1_input_system_1_1_low_level_html_a90bda7942e6235f77d48fbc1e2a42a36aa6122a65eaa676f700ae68d393054a37"><div class="ttname"><a href="namespace_unity_engine_1_1_input_system_1_1_low_level.html#a90bda7942e6235f77d48fbc1e2a42a36aa6122a65eaa676f700ae68d393054a37">UnityEngine.InputSystem.LowLevel.GamepadButton.Start</a></div><div class="ttdeci">@ Start</div><div class="ttdoc">The start button.</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
