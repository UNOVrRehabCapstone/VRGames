<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VRCapstoneGames: How do I…?</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">VRCapstoneGames
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md__c_1_2_users_2_lykos_2_desktop_2_projects_2_capstone_2_v_r_games_2_library_2_package_cache_2cd5d2c42d9a066ced05f874abceaf3f35.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">How do I…?</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md617"></a> Devices:</p>
<ul>
<li>…check if the space key has been pressed this frame?</li>
<li>…find all connected gamepads?</li>
<li>…find the gamepad that the player is currently using?</li>
<li>…know when a new device has been plugged in?</li>
</ul>
<p>Actions:</p>
<ul>
<li>…create a simple Fire-type Action?</li>
<li>…require a button to be held for 0.4 seconds before triggering an Action?</li>
<li>…use a &quot;positive&quot; and a &quot;negative&quot; button to drive an axis?</li>
<li>…create a UI to rebind input in my game?</li>
</ul>
<h1><a class="anchor" id="autotoc_md618"></a>
…check if the space key has been pressed this frame?</h1>
<p>Use this code:</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="class_keyboard.html">Keyboard</a>.current.space.wasPressedThisFrame</div>
<div class="ttc" id="aclass_keyboard_html"><div class="ttname"><a href="class_keyboard.html">Keyboard</a></div><div class="ttdef"><b>Definition</b> Keyboard.cs:7</div></div>
</div><!-- fragment --><p>You can adapt this code to other Devices that have buttons or other types of input:</p>
<div class="fragment"><div class="line">Gamepad.current.aButton.wasPressedThisFrame</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md619"></a>
…find all connected gamepads?</h1>
<p>Use the <a href="../api/UnityEngine.InputSystem.Gamepad.html"><code>Gamepad</code></a> class:</p>
<div class="fragment"><div class="line">var allGamepads = Gamepad.all;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Or more specific versions.</span></div>
<div class="line">var allPS4Gamepads = DualShockGamepadPS4.all;</div>
</div><!-- fragment --><p>Alternatively, you can use more generic Device queries using LINQ expressions or <a href="Controls.md#control-paths">control paths</a>:</p>
<div class="fragment"><div class="line"><span class="comment">// Go through all devices and select gamepads.</span></div>
<div class="line">InputSystem.devices.Select(x =&gt; x is Gamepad);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Query everything that is using the gamepad layout or based on that layout.</span></div>
<div class="line"><span class="comment">// NOTE: Don&#39;t forget to Dispose() the result.</span></div>
<div class="line">InputSystem.FindControls(<span class="stringliteral">&quot;&lt;gamepad&gt;&quot;</span>);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md620"></a>
…find the gamepad that the player is currently using?</h1>
<p>Use this code:</p>
<div class="fragment"><div class="line">var gamepad = Gamepad.current;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This works for other types of devices, too.</span></div>
<div class="line">var keyboard = <a class="code hl_class" href="class_keyboard.html">Keyboard</a>.current;</div>
<div class="line">var mouse = Mouse.current;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md621"></a>
…know when a new Device has been plugged in?</h1>
<p>Use this code:</p>
<div class="fragment"><div class="line">InputSystem.onDeviceChange +=</div>
<div class="line">    (device, change) =&gt;</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">switch</span> (change)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">case</span> InputDeviceChange.Added:</div>
<div class="line">                <span class="comment">// New Device.</span></div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> InputDeviceChange.Disconnected:</div>
<div class="line">                <span class="comment">// Device got unplugged.</span></div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> InputDeviceChange.Connected:</div>
<div class="line">                <span class="comment">// Plugged back in.</span></div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> InputDeviceChange.Removed:</div>
<div class="line">                <span class="comment">// Remove from Input System entirely; by default, Devices stay in the system once discovered.</span></div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">default</span>:</div>
<div class="line">                <span class="comment">// See InputDeviceChange reference for other event types.</span></div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
</div><!-- fragment --><p>For more details, see documentation on <a href="Devices.md#monitoring-devices">"Monitoring Devices"</a>.</p>
<h1><a class="anchor" id="autotoc_md622"></a>
…create a simple Fire-type Action?</h1>
<p>Use this code:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#</span></div>
<div class="line">   <span class="comment">// Create an Action that binds to the primary action control on all devices.</span></div>
<div class="line">   var action = <span class="keyword">new</span> InputAction(binding: <span class="stringliteral">&quot;*/{primaryAction}&quot;</span>);</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// Have it run your code when the Action is triggered.</span></div>
<div class="line">   action.performed += _ =&gt; Fire();</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// Start listening for control changes.</span></div>
<div class="line">   action.Enable();</div>
</div><!-- fragment --><p>You can also have a serialized field of type <code>InputAction</code> in your <code>MonoBehaviour</code>, like this:</p>
<div class="fragment"><div class="line"><span class="preprocessor"> #</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>MyControllerComponent : MonoBehaviour</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> InputAction fireAction;</div>
<div class="line">    <span class="keyword">public</span> InputAction walkAction;</div>
<div class="line">}</div>
</div><!-- fragment --><p>The Editor lets you add and edit Bindings for the Actions in the Inspector window.</p>
<p>&gt;<b>Note</b>: You still need to enable the Action in code and hook up your response. You can do so in the <code>Awake</code> method of your component:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#</span></div>
<div class="line"> </div>
<div class="line">   <span class="keywordtype">void</span> Awake()</div>
<div class="line">   {</div>
<div class="line">       fireAction.performed += Fire;</div>
<div class="line">       walkAction.performed += Walk;</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">   <span class="keywordtype">void</span> OnEnable()</div>
<div class="line">   {</div>
<div class="line">       fireAction.Enable();</div>
<div class="line">       walkAction.Enable();</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">   <span class="keywordtype">void</span> OnDisable()</div>
<div class="line">   {</div>
<div class="line">       fireAction.Disable();</div>
<div class="line">       walkAction.Disable();</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">   <span class="keywordtype">void</span> Fire(CallbackContext ctx)</div>
<div class="line">   {</div>
<div class="line">       <span class="comment">//...</span></div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">   <span class="keywordtype">void</span> Walk(CallbackContext ctx)</div>
<div class="line">   {</div>
<div class="line">       <span class="comment">//...</span></div>
<div class="line">   }</div>
</div><!-- fragment --><p>If you're worried about allocations from the delegates, you can use a polling approach rather than a callback-driven approach.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#</span></div>
<div class="line"> </div>
<div class="line">   <span class="keywordtype">void</span> OnEnable()</div>
<div class="line">   {</div>
<div class="line">       fireAction.Enable();</div>
<div class="line">       walkAction.Enable();</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">   <span class="keywordtype">void</span> OnDisable()</div>
<div class="line">   {</div>
<div class="line">       fireAction.Disable();</div>
<div class="line">       walkAction.Disable();</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">   <span class="keywordtype">void</span> Update()</div>
<div class="line">   {</div>
<div class="line">       <span class="keywordflow">if</span> (fireAction.triggered)</div>
<div class="line">           Fire();</div>
<div class="line">       <span class="keywordflow">if</span> (walkAction.triggered)</div>
<div class="line">           Walk();</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">   <span class="keywordtype">void</span> Fire()</div>
<div class="line">   {</div>
<div class="line">       <span class="comment">//...</span></div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">   <span class="keywordtype">void</span> Walk()</div>
<div class="line">   {</div>
<div class="line">       <span class="comment">//...</span></div>
<div class="line">   }</div>
</div><!-- fragment --><p>Typically, you need to deal with more than one Action. In this case, you might want to put these into an Input Actions Asset file. To create an Input Actions Asset, follow these steps:</p>
<ol type="1">
<li>In the Project view, click <b>Create</b>.</li>
<li>Select <b>Input Actions</b>.</li>
<li>Double-click the Asset to create and edit one or multiple Input Action Maps containing Input Actions.</li>
</ol>
<p>If you then click <b>Generate C# Class</b> in the Inspector for that Asset, <a class="el" href="namespace_unity.html">Unity</a> generates a wrapper class for your Actions which you can use like this:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#</span></div>
<div class="line">   MyInputActionAssetClass actions;</div>
<div class="line"> </div>
<div class="line">   <span class="keyword">public</span> <span class="keywordtype">void</span> OnEnable()</div>
<div class="line">   {</div>
<div class="line">       actions = <span class="keyword">new</span> MyInputActionAssetClass();</div>
<div class="line">       controls.myActionsMap.fire.performed += Fire;</div>
<div class="line">       controls.myActionsMap.walk.performed += Walk;</div>
<div class="line">   }</div>
</div><!-- fragment --><p>For more details, see documentation on <a class="el" href="md__c_1_2_users_2_lykos_2_desktop_2_projects_2_capstone_2_v_r_games_2_library_2_package_cache_2cdfb4b95e5517e6d6d9620be2f7348275.html">Actions</a>.</p>
<h1><a class="anchor" id="autotoc_md623"></a>
…require a button to be held for 0.4 seconds before triggering an Action?</h1>
<p>Put a <a href="Interactions.md#hold">hold Interaction</a> on the Action, like this:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#</span></div>
<div class="line"> </div>
<div class="line">   var action = <span class="keyword">new</span> InputAction(binding: <span class="stringliteral">&quot;*/{PrimaryAction}&quot;</span>,</div>
<div class="line">       modifiers: <span class="stringliteral">&quot;hold(duration=0.4)&quot;</span>);</div>
</div><!-- fragment --><p>To display UI feedback when the button starts being held, use the <a href="../api/UnityEngine.InputSystem.InputAction.html#UnityEngine_InputSystem_InputAction_started"><code>started</code></a> callback.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#</span></div>
<div class="line"> </div>
<div class="line">   action.started += _ =&gt; ShowGunChargeUI();</div>
<div class="line">   action.performed += _ =&gt; FinishGunChargingAndHideChargeUI();</div>
<div class="line">   action.cancelled += _ =&gt; HideChargeUI();</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md624"></a>
…use a "positive" and a "negative" button to drive an axis?</h1>
<p>Use an <a href="ActionBindings.md#1d-axis">axis composite</a> binding in the UI or in code, and bind its parts to the respective buttons.</p>
<div class="fragment"><div class="line">var accelerateAction = <span class="keyword">new</span> InputAction(<span class="stringliteral">&quot;Accelerate&quot;</span>);</div>
<div class="line">accelerateAction.AddCompositeBinding(<span class="stringliteral">&quot;Axis&quot;</span>)</div>
<div class="line">    .With(<span class="stringliteral">&quot;Positive&quot;</span>, <span class="stringliteral">&quot;&lt;Gamepad&gt;/rightTrigger&quot;</span>)</div>
<div class="line">    .With(<span class="stringliteral">&quot;Negative&quot;</span>, <span class="stringliteral">&quot;&lt;Gamepad&gt;/leftTrigger&quot;</span>);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md625"></a>
…create a UI to rebind input in my game?</h1>
<p>Create a UI with a button to trigger rebinding. If the user clicks the button to bind a control to an action, use <a href="../api/UnityEngine.InputSystem.InputActionRebindingExtensions.html#UnityEngine_InputSystem_InputActionRebindingExtensions_PerformInteractiveRebinding_UnityEngine_InputSystem_InputAction_System_Int32_"><code>InputAction.PerformInteractiveRebinding</code></a> to handle the rebinding:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#</span></div>
<div class="line">   <span class="keywordtype">void</span> RemapButtonClicked(InputAction actionToRebind)</div>
<div class="line">   {</div>
<div class="line">       var rebindOperation = actionToRebind.PerformInteractiveRebinding()</div>
<div class="line">                   <span class="comment">// To avoid accidental input from mouse motion</span></div>
<div class="line">                   .WithControlsExcluding(<span class="stringliteral">&quot;Mouse&quot;</span>)</div>
<div class="line">                   .OnMatchWaitForAnother(0.1f)</div>
<div class="line">                   .Start();</div>
<div class="line">   }</div>
</div><!-- fragment --><p>You can install the Tanks Demo sample for the Input <a class="el" href="namespace_system.html">System</a> package using the Package Manager, which has an example of an interactive rebinding UI.</p>
<h1><a class="anchor" id="autotoc_md626"></a>
…set up an Action to specifically target the left-hand XR controller?</h1>
<p>Use this code:</p>
<div class="fragment"><div class="line">var action = <span class="keyword">new</span> InputAction(binding: <span class="stringliteral">&quot;/&lt;XRController&gt;{leftHand}/position&quot;</span>);</div>
</div><!-- fragment --><p>You can also set this up for any Input Bindings in the Inspector or the Input Action Asset editor window without having to deal with paths directly.</p>
<h1><a class="anchor" id="autotoc_md627"></a>
…wait for any button to be pressed on any device?</h1>
<p>Use this code:</p>
<div class="fragment"><div class="line">var myAction = <span class="keyword">new</span> InputAction(binding: <span class="stringliteral">&quot;/*/&lt;button&gt;&quot;</span>);</div>
<div class="line">myAction.onPerformed += (action, control) =&gt; <a class="code hl_typedef" href="server_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.Log($<span class="stringliteral">&quot;Button {control.name} pressed!&quot;</span>);</div>
<div class="line">myAction.Enable();</div>
<div class="ttc" id="aserver_8cs_html_a0100be52d45f14348918ea69ec09f959"><div class="ttname"><a href="server_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a></div><div class="ttdeci">UnityEngine.Debug Debug</div><div class="ttdef"><b>Definition</b> server.cs:14</div></div>
</div><!-- fragment --><p>&gt;<b>Note</b>: This is inefficient and resource-intensive. The amount of processing an Action has to do is directly correlated with the amount of Controls it targets. Targeting every single button of every single Device yields a large number of Controls and results in a high processing overhead. For example, the keyboard alone contributes many buttons, each of which has to be processed individually.</p>
<h1><a class="anchor" id="autotoc_md628"></a>
…make my left-hand XR controller my right-hand one?</h1>
<p>Use this code:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#</span></div>
<div class="line">   var controller = XRController.leftHand;</div>
<div class="line">   InputSystem.SetUsage(controller, CommonUsages.RightHand);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md629"></a>
…get all current touches from the touchscreen?</h1>
<p>The recommended way is to use <a href="../api/UnityEngine.InputSystem.EnhancedTouch.Touch.html#UnityEngine_InputSystem_EnhancedTouch_Touch_activeTouches"><code>EnhancedTouch.Touch.activeTouches</code></a>:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#</span></div>
<div class="line">   <span class="keyword">using </span><a class="code hl_enumvalue" href="_ovr_avatar_s_d_k_c_a_p_i_8cs.html#a9971dc680103e87f677456d076b5c368af0f31c9700c6b10d8a20dc487b2ae6a8">Touch</a> = <a class="code hl_namespace" href="namespace_unity_engine.html">UnityEngine</a>.<a class="code hl_namespace" href="namespace_unity_engine_1_1_input_system.html">InputSystem</a>.<a class="code hl_namespace" href="namespace_unity_engine_1_1_input_system_1_1_enhanced_touch.html">EnhancedTouch</a>.<a class="code hl_struct" href="struct_unity_engine_1_1_input_system_1_1_enhanced_touch_1_1_touch.html">Touch</a>;</div>
<div class="line"> </div>
<div class="line">   <span class="keyword">public</span> <span class="keywordtype">void</span> Update()</div>
<div class="line">   {</div>
<div class="line">       <span class="keywordflow">foreach</span> (var touch <span class="keywordflow">in</span> <a class="code hl_enumvalue" href="_ovr_avatar_s_d_k_c_a_p_i_8cs.html#a9971dc680103e87f677456d076b5c368af0f31c9700c6b10d8a20dc487b2ae6a8">Touch</a>.activeTouches)</div>
<div class="line">           <a class="code hl_typedef" href="server_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.Log($<span class="stringliteral">&quot;{touch.touchId}: {touch.screenPosition},{touch.phase}&quot;</span>);</div>
<div class="line">   }</div>
<div class="ttc" id="a_ovr_avatar_s_d_k_c_a_p_i_8cs_html_a9971dc680103e87f677456d076b5c368af0f31c9700c6b10d8a20dc487b2ae6a8"><div class="ttname"><a href="_ovr_avatar_s_d_k_c_a_p_i_8cs.html#a9971dc680103e87f677456d076b5c368af0f31c9700c6b10d8a20dc487b2ae6a8">ovrAvatarControllerType.Touch</a></div><div class="ttdeci">@ Touch</div></div>
<div class="ttc" id="anamespace_unity_engine_1_1_input_system_1_1_enhanced_touch_html"><div class="ttname"><a href="namespace_unity_engine_1_1_input_system_1_1_enhanced_touch.html">UnityEngine.InputSystem.EnhancedTouch</a></div><div class="ttdef"><b>Definition</b> EnhancedTouchSupport.cs:23</div></div>
<div class="ttc" id="anamespace_unity_engine_1_1_input_system_html"><div class="ttname"><a href="namespace_unity_engine_1_1_input_system.html">UnityEngine.InputSystem</a></div><div class="ttdef"><b>Definition</b> AxisComposite.cs:8</div></div>
<div class="ttc" id="anamespace_unity_engine_html"><div class="ttname"><a href="namespace_unity_engine.html">UnityEngine</a></div><div class="ttdef"><b>Definition</b> OVRInputModule.cs:17</div></div>
<div class="ttc" id="astruct_unity_engine_1_1_input_system_1_1_enhanced_touch_1_1_touch_html"><div class="ttname"><a href="struct_unity_engine_1_1_input_system_1_1_enhanced_touch_1_1_touch.html">UnityEngine.InputSystem.EnhancedTouch.Touch</a></div><div class="ttdoc">A high-level representation of a touch which automatically keeps track of a touch over time.</div><div class="ttdef"><b>Definition</b> Touch.cs:38</div></div>
</div><!-- fragment --><p>&gt;<b>Note</b>: You must first enable enhanced touch support by calling <a href="../api/UnityEngine.InputSystem.EnhancedTouch.EnhancedTouchSupport.html#UnityEngine_InputSystem_EnhancedTouch_EnhancedTouchSupport_Enable"><code>InputSystem.EnhancedTouch.Enable()</code></a>.</p>
<p>You can also use the lower-level <a href="../api/UnityEngine.InputSystem.Touchscreen.html#UnityEngine_InputSystem_Touchscreen_touches"><code>Touchscreen.current.touches</code></a> API.</p>
<h1><a class="anchor" id="autotoc_md630"></a>
…create a Device?</h1>
<p>Use this code:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#</span></div>
<div class="line">   InputSystem.AddDevice&lt;Gamepad&gt;();</div>
</div><!-- fragment --><p>An alternative way is to inform the Input <a class="el" href="namespace_system.html">System</a> that a Device is available, and let the system create the Device from a matching layout. If no layout exists, the Input <a class="el" href="namespace_system.html">System</a> doesn't create the Device until you add one.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#</span></div>
<div class="line">   InputSystem.ReportAvailableDevice(</div>
<div class="line">       <span class="keyword">new</span> InputDeviceDescription</div>
<div class="line">       {</div>
<div class="line">           product = <span class="stringliteral">&quot;AwesomeGadget&quot;</span>,</div>
<div class="line">           manufacturer = <span class="stringliteral">&quot;Awesome Products Inc.&quot;</span></div>
<div class="line">       }</div>
<div class="line">   );</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md631"></a>
…create my own custom Devices?</h1>
<p>There are two possible ways to do this.</p>
<p>If you want to use one of the existing C# <a href="../api/UnityEngine.InputSystem.InputDevice.html"><code>InputDevice</code></a> classes in code to interface with your Device, you can build on an existing layout using JSON:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;name&quot; : &quot;MyDevice&quot;,</div>
<div class="line">    &quot;extend&quot; : &quot;Gamepad&quot;, // Or some other thing</div>
<div class="line">    &quot;controls&quot; : [</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot; : &quot;firstButton&quot;,</div>
<div class="line">            &quot;layout&quot; : &quot;Button&quot;,</div>
<div class="line">            &quot;offset&quot; : 0,</div>
<div class="line">            &quot;bit&quot;: 0,</div>
<div class="line">            &quot;format&quot; : &quot;BIT&quot;,</div>
<div class="line">        },</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot; : &quot;secondButton&quot;,</div>
<div class="line">            &quot;layout&quot; : &quot;Button&quot;,</div>
<div class="line">            &quot;offset&quot; : 0,</div>
<div class="line">            &quot;bit&quot;: 1,</div>
<div class="line">            &quot;format&quot; : &quot;BIT&quot;,</div>
<div class="line">        },</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot; : &quot;axis&quot;,</div>
<div class="line">            &quot;layout&quot; : &quot;Axis&quot;,</div>
<div class="line">            &quot;offset&quot; : 4,</div>
<div class="line">            &quot;format&quot; : &quot;FLT&quot;,</div>
<div class="line">            &quot;parameters&quot; : &quot;clamp=true,clampMin=0,clampMax=1&quot;</div>
<div class="line">        }</div>
<div class="line">    ]</div>
<div class="line">}</div>
</div><!-- fragment --><p> You then register your layout with the system and then instantiate it:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#</span></div>
<div class="line">   InputSystem.RegisterControlLayout(myDeviceJson);</div>
<div class="line">   var device = InputSystem.AddDevice(<span class="stringliteral">&quot;MyDevice&quot;</span>);</div>
</div><!-- fragment --><p>Alternatively, you can create your own <a href="../api/UnityEngine.InputSystem.InputDevice.html"><code>InputDevice</code></a> class and state layouts in C#.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#</span></div>
<div class="line">   <span class="keyword">public</span> <span class="keyword">struct </span>MyDeviceState : IInputStateTypeInfo</div>
<div class="line">   {</div>
<div class="line">       <span class="comment">// FourCC type codes are used to identify the memory layouts of state blocks.</span></div>
<div class="line">       <span class="keyword">public</span> FourCC format =&gt; <span class="keyword">new</span> FourCC(<span class="charliteral">&#39;M&#39;</span>, <span class="charliteral">&#39;D&#39;</span>, <span class="charliteral">&#39;E&#39;</span>, <span class="charliteral">&#39;V&#39;</span>);</div>
<div class="line"> </div>
<div class="line">       [InputControl(name = <span class="stringliteral">&quot;firstButton&quot;</span>, layout = <span class="stringliteral">&quot;Button&quot;</span>, bit = 0)]</div>
<div class="line">       [InputControl(name = <span class="stringliteral">&quot;secondButton&quot;</span>, layout = <span class="stringliteral">&quot;Button&quot;</span>, bit = 1)]</div>
<div class="line">       <span class="keyword">public</span> <span class="keywordtype">int</span> buttons;</div>
<div class="line">       [InputControl(layout = <span class="stringliteral">&quot;Analog&quot;</span>, parameters=<span class="stringliteral">&quot;clamp=true,clampMin=0,clampMax=1&quot;</span>)]</div>
<div class="line">       <span class="keyword">public</span> <span class="keywordtype">float</span> axis;</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">   [InputState(typeof(MyDeviceState)]</div>
<div class="line">   <span class="keyword">public</span> <span class="keyword">class</span> MyDevice : InputDevice</div>
<div class="line">   {</div>
<div class="line">       <span class="keyword">public</span> ButtonControl firstButton { get; <span class="keyword">private</span> set; }</div>
<div class="line">       <span class="keyword">public</span> ButtonControl secondButton { get; <span class="keyword">private</span> set; }</div>
<div class="line">       <span class="keyword">public</span> AxisControl axis { get; <span class="keyword">private</span> set; }</div>
<div class="line"> </div>
<div class="line">       <span class="keyword">protected</span> <span class="keyword">override</span> <span class="keywordtype">void</span> FinishSetup(InputControlSetup setup)</div>
<div class="line">       {</div>
<div class="line">            firstButton = setup.GetControl&lt;ButtonControl&gt;(<span class="keyword">this</span>, <span class="stringliteral">&quot;firstButton&quot;</span>);</div>
<div class="line">            secondButton = setup.GetControl&lt;ButtonControl&gt;(<span class="keyword">this</span>, <span class="stringliteral">&quot;secondButton&quot;</span>);</div>
<div class="line">            axis = setup.GetControl&lt;AxisControl&gt;(<span class="keyword">this</span>, <span class="stringliteral">&quot;axis&quot;</span>);</div>
<div class="line">            base.FinishSetup(setup);</div>
<div class="line">       }</div>
<div class="line">   }</div>
</div><!-- fragment --><p>To create an instance of your Device, register it as a layout and then instantiate it:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#</span></div>
<div class="line">   InputSystem.RegisterControlLayout(<span class="stringliteral">&quot;MyDevice&quot;</span>, typeof(MyDevice));</div>
<div class="line">   InputSystem.AddDevice(<span class="stringliteral">&quot;MyDevice&quot;</span>);</div>
</div><!-- fragment --><p>For more information, see documentation on <a href="HID.md#overriding-the-hid-fallback">HID</a>.</p>
<h1><a class="anchor" id="autotoc_md632"></a>
…deal with my gamepad data arriving in a format different from <code>GamepadState</code>?</h1>
<p>Extend the "Gamepad" layout and customize its Controls.</p>
<p>A real-world example of this is the Xbox Controller on macOS, which is supported through HID. Its layout looks like this:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;name&quot; : &quot;XboxGamepadOSX&quot;,</div>
<div class="line">    &quot;extend&quot; : &quot;Gamepad&quot;,</div>
<div class="line">    &quot;format&quot; : &quot;HID&quot;,</div>
<div class="line">    &quot;device&quot; : { &quot;interface&quot; : &quot;HID&quot;, &quot;product&quot; : &quot;Xbox.*Controller&quot; },</div>
<div class="line">    &quot;controls&quot; : [</div>
<div class="line">        { &quot;name&quot; : &quot;leftShoulder&quot;, &quot;offset&quot; : 2, &quot;bit&quot; : 8 },</div>
<div class="line">        { &quot;name&quot; : &quot;rightShoulder&quot;, &quot;offset&quot; : 2, &quot;bit&quot; : 9 },</div>
<div class="line">        { &quot;name&quot; : &quot;leftStickPress&quot;, &quot;offset&quot; : 2, &quot;bit&quot; : 14 },</div>
<div class="line">        { &quot;name&quot; : &quot;rightStickPress&quot;, &quot;offset&quot; : 2, &quot;bit&quot; : 15 },</div>
<div class="line">        { &quot;name&quot; : &quot;buttonSouth&quot;, &quot;offset&quot; : 2, &quot;bit&quot; : 12 },</div>
<div class="line">        { &quot;name&quot; : &quot;buttonEast&quot;, &quot;offset&quot; : 2, &quot;bit&quot; : 13 },</div>
<div class="line">        { &quot;name&quot; : &quot;buttonWest&quot;, &quot;offset&quot; : 2, &quot;bit&quot; : 14 },</div>
<div class="line">        { &quot;name&quot; : &quot;buttonNorth&quot;, &quot;offset&quot; : 2, &quot;bit&quot; : 15 },</div>
<div class="line">        { &quot;name&quot; : &quot;dpad&quot;, &quot;offset&quot; : 2 },</div>
<div class="line">        { &quot;name&quot; : &quot;dpad/up&quot;, &quot;offset&quot; : 0, &quot;bit&quot; : 8 },</div>
<div class="line">        { &quot;name&quot; : &quot;dpad/down&quot;, &quot;offset&quot; : 0, &quot;bit&quot; : 9 },</div>
<div class="line">        { &quot;name&quot; : &quot;dpad/left&quot;, &quot;offset&quot; : 0, &quot;bit&quot; : 10 },</div>
<div class="line">        { &quot;name&quot; : &quot;dpad/right&quot;, &quot;offset&quot; : 0, &quot;bit&quot; : 11 },</div>
<div class="line">        { &quot;name&quot; : &quot;start&quot;, &quot;offset&quot; : 2, &quot;bit&quot; : 4 },</div>
<div class="line">        { &quot;name&quot; : &quot;select&quot;, &quot;offset&quot; : 2, &quot;bit&quot; : 5 },</div>
<div class="line">        { &quot;name&quot; : &quot;xbox&quot;, &quot;offset&quot; : 2, &quot;bit&quot; : 2, &quot;layout&quot; : &quot;Button&quot; },</div>
<div class="line">        { &quot;name&quot; : &quot;leftTrigger&quot;, &quot;offset&quot; : 4, &quot;format&quot; : &quot;BYTE&quot; },</div>
<div class="line">        { &quot;name&quot; : &quot;rightTrigger&quot;, &quot;offset&quot; : 5, &quot;format&quot; : &quot;BYTE&quot; },</div>
<div class="line">        { &quot;name&quot; : &quot;leftStick&quot;, &quot;offset&quot; : 6, &quot;format&quot; : &quot;VC2S&quot; },</div>
<div class="line">        { &quot;name&quot; : &quot;leftStick/x&quot;, &quot;offset&quot; : 0, &quot;format&quot; : &quot;SHRT&quot;, &quot;parameters&quot; : &quot;normalize,normalizeMin=-0.5,normalizeMax=0.5&quot; },</div>
<div class="line">        { &quot;name&quot; : &quot;leftStick/y&quot;, &quot;offset&quot; : 2, &quot;format&quot; : &quot;SHRT&quot;, &quot;parameters&quot; : &quot;invert,normalize,normalizeMin=-0.5,normalizeMax=0.5&quot; },</div>
<div class="line">        { &quot;name&quot; : &quot;rightStick&quot;, &quot;offset&quot; : 10, &quot;format&quot; : &quot;VC2S&quot; },</div>
<div class="line">        { &quot;name&quot; : &quot;rightStick/x&quot;, &quot;offset&quot; : 0, &quot;format&quot; : &quot;SHRT&quot;, &quot;parameters&quot; : &quot;normalize,normalizeMin=-0.5,normalizeMax=0.5&quot; },</div>
<div class="line">        { &quot;name&quot; : &quot;rightStick/y&quot;, &quot;offset&quot; : 2, &quot;format&quot; : &quot;SHRT&quot;, &quot;parameters&quot; : &quot;invert,normalize,normalizeMin=-0.5,normalizeMax=0.5&quot; }</div>
<div class="line">    ]</div>
<div class="line">}</div>
</div><!-- fragment --><p>The same principle applies if some buttons on your Device are swapped, for example. In this case, you can remap their offsets.</p>
<h1><a class="anchor" id="autotoc_md633"></a>
…force the Input System to use my own layout when the native backend discovers a specific Device?</h1>
<p>Describe the Device in the layout, like this:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">   &quot;name&quot; : &quot;MyGamepad&quot;,</div>
<div class="line">   &quot;extend&quot; : &quot;Gamepad&quot;,</div>
<div class="line">   &quot;device&quot; : {</div>
<div class="line">       // All strings in here are regexs and case-insensitive.</div>
<div class="line">       &quot;product&quot; : &quot;MyController&quot;,</div>
<div class="line">       &quot;manufacturer&quot; : &quot;MyCompany&quot;</div>
<div class="line">   }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Note that you don't have to restart <a class="el" href="namespace_unity.html">Unity</a> in order for changes in your layout to take effect on native Devices. The Input <a class="el" href="namespace_system.html">System</a> applies changes automatically on every domain reload, so you can just keep refining a layout and your Device is recreated with the most up-to-date version every time scripts are recompiled.</p>
<h1><a class="anchor" id="autotoc_md634"></a>
…add deadzoning to my gamepad sticks?</h1>
<p>Put a <a href="Processors.md#stick-deadzone">stick deadzone Processor</a> on the sticks, like this:</p>
<div class="fragment"><div class="line"> {</div>
<div class="line">    &quot;name&quot; : &quot;MyGamepad&quot;,</div>
<div class="line">    &quot;extend&quot; : &quot;Gamepad&quot;,</div>
<div class="line">    &quot;controls&quot; : [</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot; : &quot;leftStick&quot;,</div>
<div class="line">            &quot;processors&quot; : &quot;stickDeadzone(min=0.125,max=0.925)&quot;</div>
<div class="line">        },</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot; : &quot;rightStick&quot;,</div>
<div class="line">            &quot;processors&quot; : &quot;stickDeadzone(min=0.125,max=0.925)&quot;</div>
<div class="line">        }</div>
<div class="line">    ]</div>
<div class="line">}</div>
</div><!-- fragment --><p>You can do the same in your C# state structs.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#</span></div>
<div class="line">   <span class="keyword">public</span> <span class="keyword">struct </span>MyDeviceState</div>
<div class="line">   {</div>
<div class="line">       [InputControl(processors = <span class="stringliteral">&quot;stickDeadzone(min=0.125,max=0.925)&quot;</span>]</div>
<div class="line">       <span class="keyword">public</span> StickControl leftStick;</div>
<div class="line">       [InputControl(processors = <span class="stringliteral">&quot;stickDeadzone(min=0.125,max=0.925)&quot;</span>]</div>
<div class="line">       <span class="keyword">public</span> StickControl rightStick;</div>
<div class="line">   }</div>
</div><!-- fragment --><p>The gamepad layout already adds stick deadzone processors which take their min and max values from <a href="../api/UnityEngine.InputSystem.InputSettings.html#UnityEngine_InputSystem_InputSettings_defaultDeadzoneMin"><code>InputSettings.defaultDeadzoneMin</code></a> and <a href="../api/UnityEngine.InputSystem.InputSettings.html#UnityEngine_InputSystem_InputSettings_defaultDeadzoneMax"><code>InputSettings.defaultDeadzoneMax</code></a>.</p>
<h1><a class="anchor" id="autotoc_md635"></a>
…give my head tracking an extra update before rendering?</h1>
<p>First, enable before render updates on your Device.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;name&quot; : &quot;MyHMD&quot;,</div>
<div class="line">    &quot;extend&quot; : &quot;HMD&quot;,</div>
<div class="line">    &quot;beforeRender&quot; : &quot;Update&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Then, make sure you put extra <code>StateEvents</code> for your HMD on the queue right in time before rendering. Also, if your HMD is a combination of non-tracking and tracking controls, you can update just the tracking by sending a delta event instead of a full state event.</p>
<h1><a class="anchor" id="autotoc_md636"></a>
…record events flowing through the system?</h1>
<p>Use this code:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#</span></div>
<div class="line"> </div>
<div class="line">   var trace = <span class="keyword">new</span> InputEventTrace(); <span class="comment">// Can also give device ID to only</span></div>
<div class="line">                                      <span class="comment">// trace events for a specific device.</span></div>
<div class="line"> </div>
<div class="line">   trace.Enable();</div>
<div class="line"> </div>
<div class="line">   <span class="comment">//…run stuff</span></div>
<div class="line"> </div>
<div class="line">   var current = <span class="keyword">new</span> InputEventPtr();</div>
<div class="line">   <span class="keywordflow">while</span> (trace.GetNextEvent(ref current))</div>
<div class="line">   {</div>
<div class="line">       <a class="code hl_typedef" href="server_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.Log(<span class="stringliteral">&quot;Got some event: &quot;</span> + current);</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// Also supports IEnumerable.</span></div>
<div class="line">   <span class="keywordflow">foreach</span> (var eventPtr <span class="keywordflow">in</span> trace)</div>
<div class="line">       <a class="code hl_typedef" href="server_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.Log(<span class="stringliteral">&quot;Got some event: &quot;</span> + eventPtr);</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// Trace consumes unmanaged resources. Make sure to dispose.</span></div>
<div class="line">   trace.Dispose();</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md637"></a>
…see events as they're processed?</h1>
<p>Use this code:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#</span></div>
<div class="line"> </div>
<div class="line">   InputSystem.onEvent +=</div>
<div class="line">       (eventPtr, device) =&gt;</div>
<div class="line">       {</div>
<div class="line">           <span class="comment">// Can handle events yourself, for example, and then stop them</span></div>
<div class="line">           <span class="comment">// from further processing by marking them as handled.</span></div>
<div class="line">           eventPtr.handled = <span class="keyword">true</span>;</div>
<div class="line">       };</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md638"></a>
…see what Devices I have and what state they're in?</h1>
<p>Go to <b><a class="el" href="namespace_windows.html">Windows</a> &gt; Analysis &gt; Input Debugger</b>(<a class="el" href="_debugging_8md.html">Debugging.md</a>), then double click on a Device to see its Controls. You can also click the <b>Remote Devices</b> button to remotely see Devices from <a class="el" href="namespace_unity.html">Unity</a> Players deployed to any connected computers or devices. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
