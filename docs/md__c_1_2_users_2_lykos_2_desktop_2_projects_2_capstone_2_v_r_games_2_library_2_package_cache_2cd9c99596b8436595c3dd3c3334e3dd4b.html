<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VRGames: Setup and cleanup at build time</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">VRGames
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md__c_1_2_users_2_lykos_2_desktop_2_projects_2_capstone_2_v_r_games_2_library_2_package_cache_2cd9c99596b8436595c3dd3c3334e3dd4b.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Setup and cleanup at build time</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md1921"></a> In some cases, it is relevant to perform changes to <a class="el" href="namespace_unity.html">Unity</a> or the file system before building the tests. In the same way, it may be necessary to clean up such changes after the test run. In response to such needs, you can incorporate the pre-build setup and post-build cleanup concepts into your tests in one of the following ways:</p>
<ol type="1">
<li>Via implementation of <code>IPrebuildSetup</code> and <code>IPostBuildCleanup</code> interfaces by a test class.</li>
<li>Via applying the <code>PrebuildSetup</code> attribute and <code>PostBuildCleanup</code> attribute on your test class, one of the tests or the test assembly, providing a class name that implements the corresponding interface as an argument (fx <code>[PrebuildSetup("MyTestSceneSetup")]</code>).</li>
</ol>
<h1><a class="anchor" id="autotoc_md1922"></a>
Execution order</h1>
<p>All setups run in a deterministic order one after another. The first to run are the setups defined with attributes. Then any test class implementing the interface runs, in alphabetical order inside their namespace, which is the same order as the tests run.</p>
<blockquote class="doxtable">
<p>&zwj;<b>Note</b>: Cleanup runs right away for a standalone test run, but only after related tests run in the <a class="el" href="namespace_unity.html">Unity</a> Editor. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md1923"></a>
PrebuildSetup and PostBuildCleanup</h1>
<p>Both <code>PrebuildSetup</code> and <code>PostBuildCleanup</code> attributes run if the respective test or test class is in the current test run. The test is included either by running all tests or setting a <a href="./workflow-create-test.md#filters">filter</a> that includes the test. If multiple tests reference the same pre-built setup or post-build cleanup, then it only runs once.</p>
<h1><a class="anchor" id="autotoc_md1924"></a>
IPrebuildSetup</h1>
<p>Implement this interface if you want to define a set of actions to run as a pre-build step.</p>
<h2><a class="anchor" id="autotoc_md1925"></a>
Public methods</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Syntax   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>void Setup()</code>   </td><td class="markdownTableBodyNone">Implement this method to call actions automatically before the build process.   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md1926"></a>
IPostBuildCleanup</h1>
<p>Implement this interface if you want to define a set of actions to execute as a post-build step. Cleanup runs right away for a standalone test run, but only after all the tests run within the Editor.</p>
<h2><a class="anchor" id="autotoc_md1927"></a>
Public methods</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Syntax   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>void Cleanup()</code>   </td><td class="markdownTableBodyNone">Implement this method to specify actions that should run as a post-build cleanup step.   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md1928"></a>
Example</h1>
<div class="fragment"><div class="line"><span class="preprocessor"> #</span></div>
<div class="line">[TestFixture]</div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>CreateSpriteTest : IPrebuildSetup</div>
<div class="line">{</div>
<div class="line">    Texture2D m_Texture;</div>
<div class="line">    <a class="code hl_typedef" href="_edit_shape_tool_8cs.html#ad2980d7cd70e3eb48ec9433f3f0d753b">Sprite</a> m_Sprite;</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> Setup()</div>
<div class="line">    {</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#if UNITY_EDITOR</span></div>
<div class="line"> </div>
<div class="line">        var spritePath = <span class="stringliteral">&quot;Assets/Resources/Circle.png&quot;</span>;</div>
<div class="line"> </div>
<div class="line">        var ti = <a class="code hl_namespace" href="namespace_unity_editor.html">UnityEditor</a>.AssetImporter.GetAtPath(spritePath) as <a class="code hl_namespace" href="namespace_unity_editor.html">UnityEditor</a>.TextureImporter;</div>
<div class="line"> </div>
<div class="line">        ti.textureCompression = <a class="code hl_namespace" href="namespace_unity_editor.html">UnityEditor</a>.TextureImporterCompression.Uncompressed;</div>
<div class="line"> </div>
<div class="line">        ti.SaveAndReimport();</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    [SetUp]</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> SetUpTest()</div>
<div class="line">    {</div>
<div class="line">        m_Texture = Resources.Load&lt;Texture2D&gt;(<span class="stringliteral">&quot;Circle&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    [Test]</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> WhenNullTextureIsPassed_CreateShouldReturnNullSprite()</div>
<div class="line">    {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Check with Valid Texture.</span></div>
<div class="line"> </div>
<div class="line">        LogAssert.Expect(LogType.Log, <span class="stringliteral">&quot;Circle Sprite Created&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_typedef" href="_edit_shape_tool_8cs.html#ad2980d7cd70e3eb48ec9433f3f0d753b">Sprite</a>.Create(m_Texture, <span class="keyword">new</span> Rect(0, 0, m_Texture.width, m_Texture.height), <span class="keyword">new</span> Vector2(0.5f, 0.5f));</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_typedef" href="server_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.Log(<span class="stringliteral">&quot;Circle Sprite Created&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Check with NULL Texture. Should return NULL Sprite.</span></div>
<div class="line"> </div>
<div class="line">        m_Sprite = <a class="code hl_typedef" href="_edit_shape_tool_8cs.html#ad2980d7cd70e3eb48ec9433f3f0d753b">Sprite</a>.Create(null, <span class="keyword">new</span> Rect(0, 0, m_Texture.width, m_Texture.height), <span class="keyword">new</span> Vector2(0.5f, 0.5f));</div>
<div class="line"> </div>
<div class="line">        Assert.That(m_Sprite, <a class="code hl_enumvalue" href="namespace_oculus_1_1_interaction_1_1_pose_detection.html#a0a73ad0b9460f8e93e08284f107edc0ea27d4cf7da57f6748f79254f7be42cca3">Is</a>.Null, <span class="stringliteral">&quot;Sprite created with null texture should be null&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="a_edit_shape_tool_8cs_html_ad2980d7cd70e3eb48ec9433f3f0d753b"><div class="ttname"><a href="_edit_shape_tool_8cs.html#ad2980d7cd70e3eb48ec9433f3f0d753b">Sprite</a></div><div class="ttdeci">UnityEngine.ProBuilder.Shapes.Sprite Sprite</div><div class="ttdef"><b>Definition</b> EditShapeTool.cs:11</div></div>
<div class="ttc" id="anamespace_oculus_1_1_interaction_1_1_pose_detection_html_a0a73ad0b9460f8e93e08284f107edc0ea27d4cf7da57f6748f79254f7be42cca3"><div class="ttname"><a href="namespace_oculus_1_1_interaction_1_1_pose_detection.html#a0a73ad0b9460f8e93e08284f107edc0ea27d4cf7da57f6748f79254f7be42cca3">Oculus.Interaction.PoseDetection.FeatureStateActiveMode.Is</a></div><div class="ttdeci">@ Is</div></div>
<div class="ttc" id="anamespace_unity_editor_html"><div class="ttname"><a href="namespace_unity_editor.html">UnityEditor</a></div><div class="ttdef"><b>Definition</b> AutoUVEditor.cs:10</div></div>
<div class="ttc" id="aserver_8cs_html_a0100be52d45f14348918ea69ec09f959"><div class="ttname"><a href="server_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a></div><div class="ttdeci">UnityEngine.Debug Debug</div><div class="ttdef"><b>Definition</b> server.cs:14</div></div>
</div><!-- fragment --><blockquote class="doxtable">
<p>&zwj;<b>Tip</b>: Use <code>#if UNITY_EDITOR</code> if you want to access Editor only APIs, but the setup/cleanup is inside a <b>Play Mode</b> assembly. </p>
</blockquote>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
